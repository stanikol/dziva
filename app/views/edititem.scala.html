@(account: Entity[Account], goodsEntityForm: Form[Entity[GoodsItem]])(implicit webJarAssets: WebJarAssets)

@*
 **************
 **************
 **************
 *@
@itemId     = @{goodsEntityForm("id").value.getOrElse("0").toInt}
@item4sale  = @{x: String => goodsEntityForm.data.getOrElse("goodsitem."+x, "")}

@_template(Some(account))  {
    @goodsEntityForm.hasErrors - @itemId
    <form action = '@routes.RestrictedApplication.edititem(itemId))'>
        <fieldset>
            <input id="id"  type="hidden" name="id" value="@itemId" />
            @for( (col, coltitle) <- models.GoodsItem.header ){
                <div class="row collapse">
                @goodsEntityForm(col).errors.foreach { error =>
                        <span>@error.message</span>
                    }
                @if(col == "category"){
                    <div class="large-1 columns">
                        <label for="@col" class="right">
                            <span class="label">@coltitle</span>
                        </label>
                    </div>
                    <div class="large-10 columns">
                        <select id="@col" name="goodsitem.category">
                            @for(cat <- models.db.GoodsCategories.values){
                                @if(item4sale("category")==cat.toString){
                                    <option value="@cat" selected>@cat</option>
                                } else {
                                    <option value="@cat" >@cat</option>
                                }
                            }
                        </select>
                    </div>
                } else { @if(col == "pic") {
                    <div class="large-1 columns">
                        <label for="@col" class="right">
                            <span class="label">@coltitle  </span>
                        </label>
                        @*--<img src="data:image/jpeg;charset=utf-8;base64,@goodsEntityForm.pic">*@
                    </div>
                    <div class="large-10 columns">
                        <input id="@col"  type="text" name="goodsitem.@col" value="@item4sale(col)" />
                    </div>
                } else {
                        <div class="large-1 columns">
                            <label for="@col" class="right">
                            <span class="label">@coltitle</span>
                            </label>
                        </div>
                        <div class="large-10 columns">
                            <input id="@col"  type="text" name="goodsitem.@col" value="@item4sale(col)" />
                        </div>
                }}

                </div>
            }
        <input name='action' type="submit" value="Сохранить"/>
        <input name='action' type="submit" value="Удалить" />
        <input name='action' type="submit" value="Новый"/>
        </fieldset>
    </form>
}
